# HowLongToPlay Parser

Этот скрипт получает оценку времени прохождения игр с сайта howlongtoplay.ru. Он предоставляет оценки для основной кампании, кампании с дополнительными заданиями и полного прохождения игры.

## Необходимые условия

*   Python 3.6+
*   Библиотека `requests`:  `pip install requests`
*   Библиотека `beautifulsoup4`: `pip install beautifulsoup4`

## Установка

1.  Склонируйте репозиторий или скачайте файлы скрипта (`main.py` и `parser.py`).

## Использование

Скрипт запускается из командной строки, с указанием названия игры в качестве аргумента.

```bash
python main.py -g "Название Игры"
# или
python main.py --game "Название Игры"

markdown
Замените "Название Игры" на название игры, которую вы хотите найти. Название игры должно быть похоже на то, как оно указано на howlongtoplay.ru, для получения наилучших результатов.

Пример:

python main.py -g "Dead Cells"

bash
Это выведет оценку времени прохождения для Dead Cells.

Вывод
Скрипт выведет оценку времени прохождения игры в следующем формате:

Основная кампания:                  Xч. Yм.
Кампания + дополнительные задания:    Aч. Bм.
Полное прохождение:               Cч. Dм.

Где X, Y, A, B, C и D - это предполагаемые часы и минуты.

Обработка ошибок
Если скрипт сталкивается с ошибкой (например, игра не найдена на howlongtoplay.ru), он выведет сообщение:

Что-то пошло не так

Детали скрипта
main.py: Это основной скрипт, который разбирает аргументы командной строки, вызывает функцию parse из parser.py и выводит результаты. Он обрабатывает ввод пользователя и сообщает об ошибках.
parser.py: Этот скрипт содержит функцию parse, которая получает данные с howlongtoplay.ru, разбирает HTML с помощью BeautifulSoup и извлекает оценку времени прохождения. Он использует библиотеку requests для выполнения HTTP-запросов и beautifulsoup4 для разбора HTML. Он также определяет пользовательское исключение DefaultError для обработки ошибок во время разбора.
Объяснение кода
main.py:

Использует optparse для обработки аргументов командной строки (в частности, опцию -g или --game).
Преобразует название игры в нижний регистр.
Заменяет цифры в названии игры на повторы символа ‘i’ (это специфичная обработка для соответствия требованиям сайта). Например, “diablo4” становится “diabloiiii”.
Вызывает функцию parse() из parser.py с исправленным названием игры.
Выводит отформатированный вывод.
Перехватывает исключение DefaultError, если что-то пошло не так во время разбора.
parser.py:

Строит URL-адрес для howlongtoplay.ru на основе предоставленного названия игры.
Делает HTTP-запрос к URL-адресу с помощью библиотеки requests.
Проверяет, равен ли код состояния ответа 200 (OK). Если нет, вызывает DefaultError.
Разбирает HTML-контент с помощью BeautifulSoup с парсером html.parser.
Находит соответствующие элементы div, содержащие оценки времени.
Извлекает числовые значения (часы и минуты) из текста этих элементов div с помощью регулярных выражений.
Возвращает список, содержащий извлеченные оценки времени для основной кампании, кампании с дополнительными заданиями и полного прохождения.
Примечание об использовании веб-сайта
Пожалуйста, используйте этот скрипт ответственно и избегайте чрезмерных запросов к веб-сайту howlongtoplay.ru. Слишком много запросов за короткий период времени может быть расценено как злоупотребление и может привести к блокировке вашего IP-адреса. Рассмотрите возможность добавления задержек между запросами, если вы планируете использовать скрипт для многократного поиска. “`
